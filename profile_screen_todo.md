# 프로필 화면 유저 사진 추가 기능 TODO 리스트

## 1. 모델 및 데이터 구조 업데이트
- [x] `UserProfile` 모델에 `profileImageUrl` 필드 추가
- [x] Supabase 데이터베이스에 `profile_images` 테이블 또는 `profiles` 테이블에 `profile_image_url` 컬럼 추가
- [x] 이미지 업로드/다운로드를 위한 Supabase Storage 버킷 설정

## 2. 이미지 선택 및 업로드 기능
- [x] `image_picker` 패키지 추가 (`pubspec.yaml`)
- [x] 카메라/갤러리에서 이미지 선택 기능 구현
- [x] 이미지 크롭/리사이즈 기능 추가 (선택사항)
- [x] 이미지 업로드 진행률 표시
- [x] 이미지 업로드 실패 시 에러 처리

## 3. UI/UX 개선
- [x] 프로필 카드의 CircleAvatar를 실제 이미지로 교체
- [x] 이미지가 없을 때 기본 아바타 표시
- [x] 이미지 선택 버튼 추가 (카메라/갤러리 아이콘)
- [x] 이미지 편집 모드에서 이미지 변경 UI 추가
- [x] 이미지 로딩 상태 표시

## 4. AuthProvider 업데이트
- [x] `fetchUserProfile()` 메서드에 프로필 이미지 URL 포함
- [x] `updateUserProfile()` 메서드에 이미지 업로드 기능 추가
- [x] 이미지 업로드 후 프로필 정보 업데이트 로직

## 5. 이미지 관리 기능
- [x] 이미지 캐싱 구현 (선택사항)
- [x] 이미지 삭제 기능
- [x] 기본 이미지로 되돌리기 기능
- [x] 이미지 크기 제한 및 압축

## 6. 권한 및 보안
- [x] 카메라/갤러리 접근 권한 요청
- [x] 이미지 파일 형식 검증
- [x] 파일 크기 제한 설정
- [x] 업로드된 이미지의 보안 정책 설정

## 7. 에러 처리 및 사용자 피드백
- [x] 네트워크 오류 시 이미지 로딩 실패 처리
- [x] 이미지 업로드 실패 시 사용자에게 알림
- [x] 권한 거부 시 안내 메시지
- [x] 이미지 변경 성공 시 스낵바 표시

## 8. 성능 최적화
- [x] 이미지 lazy loading 구현
- [x] 이미지 압축 및 최적화
- [x] 메모리 사용량 최적화
- [x] 이미지 캐시 정리 로직

## 9. 테스트 및 검증
- [x] 다양한 이미지 형식 테스트 (JPG, PNG, GIF 등)
- [x] 다양한 이미지 크기 테스트
- [x] 네트워크 연결 불안정 상황 테스트
- [x] 권한 거부 상황 테스트

## 10. 추가 기능 (선택사항)
- [ ] 이미지 필터/효과 적용
- [ ] 프로필 이미지 프레임/테두리 추가
- [ ] 이미지 편집 도구 (밝기, 대비 등)
- [ ] 프로필 이미지 공유 기능

## 🐛 버그 수정 완료
- [x] Flutter Web에서 `_Namespace` 에러 수정 (dart:io 플랫폼별 처리)
- [x] `profile_image_url` 컬럼 누락 에러 수정 (데이터베이스 마이그레이션)
- [x] 이미지 업로드 경로 개선 (사용자 ID별 폴더 구조)
- [x] 에러 처리 및 디버그 로그 개선

## 구현 우선순위
1. **높음**: 모델 업데이트, 기본 이미지 선택/업로드 기능 ✅
2. **중간**: UI 개선, 에러 처리, 권한 관리 ✅
3. **낮음**: 성능 최적화, 추가 기능

## 예상 소요 시간
- 기본 기능 구현: 2-3일 ✅
- UI/UX 개선: 1-2일 ✅
- 테스트 및 버그 수정: 1일 ✅
- **총 예상 시간: 4-6일** ✅ **완료!** 